"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[559],{8332:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": () => (/* binding */ TableFilter)\n});\n\n;// CONCATENATED MODULE: ../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../core__front-end/v2/shared/js/components/table-filter/TableFilter.vue?vue&type=template&id=13ced19d&\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c("span", { staticClass: "table--filtered" }, [\n    _vm.tableCaption\n      ? _c("h6", { staticClass: "h__caption" }, [\n          _vm._v("\\n\\t\\t" + _vm._s(_vm.tableCaption.content) + "\\n\\t")\n        ])\n      : _vm._e(),\n    _vm._v(" "),\n    _c("div", { staticClass: "filter-form" }, [\n      _c("span", { staticClass: "icon icon-funnel" }),\n      _vm._v(" "),\n      _c("input", {\n        directives: [\n          {\n            name: "model",\n            rawName: "v-model",\n            value: _vm.filter,\n            expression: "filter"\n          }\n        ],\n        staticClass: "filter__input",\n        attrs: {\n          type: "text",\n          placeholder: "Filter table...",\n          "aria-label": "Enter search term to filter table results"\n        },\n        domProps: { value: _vm.filter },\n        on: {\n          input: function($event) {\n            if ($event.target.composing) {\n              return\n            }\n            _vm.filter = $event.target.value\n          }\n        }\n      })\n    ]),\n    _vm._v(" "),\n    _vm.tableThead\n      ? _c("div", { staticClass: "table_wrap" }, [\n          _c("table", { staticStyle: { width: "100%" } }, [\n            _vm.tableThead\n              ? _c(\n                  "thead",\n                  _vm._l(_vm.tableThead.children, function(headTr, trhId) {\n                    return _c(\n                      "tr",\n                      { key: "trh_" + trhId },\n                      _vm._l(headTr.children, function(headTh, thId) {\n                        return _c("th", { key: "th_" + trhId + "_" + thId }, [\n                          _vm._v(\n                            "\\n\\t\\t\\t\\t\\t\\t" +\n                              _vm._s(headTh.content) +\n                              "\\n\\t\\t\\t\\t\\t"\n                          )\n                        ])\n                      }),\n                      0\n                    )\n                  }),\n                  0\n                )\n              : _vm._e(),\n            _vm._v(" "),\n            _vm.tableTbody\n              ? _c(\n                  "tbody",\n                  [\n                    _vm.isFilterEmpty\n                      ? _c("tr", [\n                          _c("td", { attrs: { colspan: _vm.colspan } }, [\n                            _vm._v("No results")\n                          ])\n                        ])\n                      : _vm._l(_vm.filteredRows, function(bodyTr, trbId) {\n                          return _c(\n                            "tr",\n                            { key: "trb_" + trbId },\n                            _vm._l(bodyTr.children, function(bodyTd, tdId) {\n                              return _c("td", {\n                                key: "td_" + trbId + "_" + tdId,\n                                domProps: {\n                                  innerHTML: _vm._s(\n                                    _vm.highlightMatches(bodyTd.content)\n                                  )\n                                }\n                              })\n                            }),\n                            0\n                          )\n                        })\n                  ],\n                  2\n                )\n              : _vm._e()\n          ])\n        ])\n      : _c("div", {\n          domProps: { innerHTML: _vm._s(_vm.processedHtml.outerHTML) }\n        })\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\n\n;// CONCATENATED MODULE: ../../../../../../core__front-end/v2/shared/js/components/table-filter/TableFilter.vue?vue&type=template&id=13ced19d&\n\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.string.trim.js\nvar es_string_trim = __webpack_require__(3491);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.array.filter.js\nvar es_array_filter = __webpack_require__(5453);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.array.for-each.js\nvar es_array_for_each = __webpack_require__(4579);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__(5742);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.array.includes.js\nvar es_array_includes = __webpack_require__(8406);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.string.includes.js\nvar es_string_includes = __webpack_require__(6047);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.date.to-string.js\nvar es_date_to_string = __webpack_require__(2684);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__(297);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.regexp.to-string.js\nvar es_regexp_to_string = __webpack_require__(3094);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.regexp.constructor.js\nvar es_regexp_constructor = __webpack_require__(1626);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__(1611);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(8670);\n// EXTERNAL MODULE: ../../../../../../node_modules/core-js/modules/es.array.concat.js\nvar es_array_concat = __webpack_require__(2357);\n// EXTERNAL MODULE: ../../../../../../node_modules/lodash.debounce/index.js\nvar lodash_debounce = __webpack_require__(8849);\nvar lodash_debounce_default = /*#__PURE__*/__webpack_require__.n(lodash_debounce);\n;// CONCATENATED MODULE: ../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-8[0].rules[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../core__front-end/v2/shared/js/components/table-filter/TableFilter.vue?vue&type=script&lang=js&\n\n\n\n\n\n\n\n\n\n\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ const TableFiltervue_type_script_lang_js_ = ({\n  name: \'TableFilter\',\n  props: {\n    rawHtml: {\n      type: String\n    }\n  },\n  data: function data() {\n    return {\n      processedHtml: false,\n      tableJson: false,\n      filter: \'\'\n    };\n  },\n  computed: {\n    tableCaption: function tableCaption() {\n      return this.findEl(\'caption\', this.tableJson);\n    },\n    tableThead: function tableThead() {\n      return this.findEl(\'thead\', this.tableJson);\n    },\n    tableTbody: function tableTbody() {\n      return this.findEl(\'tbody\', this.tableJson);\n    },\n\n    /**\n     * Returns all rows where cells include text from the input field\n     */\n    filteredRows: function filteredRows() {\n      var _this = this;\n\n      if (this.filter.trim() !== \'\') {\n        return this.tableTbody.children.filter(function (row) {\n          var include = false;\n          row.children.forEach(function (child) {\n            if (child.content.toString().toLowerCase().includes(_this.filter.toLocaleLowerCase())) {\n              include = true;\n            }\n          });\n          return include ? row : false;\n        });\n      }\n\n      return this.tableTbody.children;\n    },\n    colspan: function colspan() {\n      return this.tableThead.children.length + 1;\n    },\n    isFilterEmpty: function isFilterEmpty() {\n      return this.filteredRows.length === 0;\n    }\n  },\n  watch: {\n    filter: function filter(newValue, oldValue) {\n      this.debouncedAnnouncement();\n    }\n  },\n  created: function created() {\n    this.processHtml();\n    this.debouncedAnnouncement = lodash_debounce_default()(this.announcement, 1000);\n  },\n  methods: {\n    tableToJson: function tableToJson(table) {\n      /**\n       * Recursive function that parses html table and converts it into JSON\n       *\n       * @param { Object } elHtml - HTML object that contains table\n       * @returns { Object } JSON element with parsed table\n       */\n      var parseTable = function parseTable() {\n        var elHtml = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n        if (elHtml === null) {\n          return false;\n        }\n\n        var elName = String(elHtml.nodeName).toLowerCase();\n        var elJson = {\n          nodeName: elName\n        };\n\n        if ([\'caption\', \'td\', \'th\'].includes(elName)) {\n          elJson.content = elHtml.textContent.trim();\n        }\n\n        if (\'colspan\' in elHtml) {\n          elJson.colspan = elHtml.colspan;\n        }\n\n        if (\'rowspan\' in elHtml) {\n          elJson.rowspan = elHtml.rowspan;\n        }\n\n        if (\'children\' in elHtml && elHtml.children.length > 0) {\n          elJson.children = [];\n          elHtml.children.forEach(function (childElHtml) {\n            elJson.children.push(parseTable(childElHtml));\n          });\n        }\n\n        return elJson;\n      };\n\n      this.tableJson = parseTable(table);\n    },\n\n    /**\n     * Searches for the first element with desired name\n     *\n     * @param { String } elName - Name of the element\n     * @param { Object } elNode - JSON object from converted HTML\n     *\n     * @returns { Object } First node in JSON object that satisfies the condition\n     *\n     * @example\n     * this.findEl(\'caption\', this.tableJson)\n     */\n    findEl: function findEl(elName, elNode) {\n      var found = false;\n\n      var search = function search() {\n        var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n        if (String(element.nodeName) === String(elName)) {\n          found = element;\n        }\n\n        if (\'children\' in element) {\n          for (var i = 0; i < element.children.length; i++) {\n            var newSearch = search(element.children[i]);\n\n            if (newSearch) {\n              break;\n            }\n          }\n        }\n\n        return found;\n      };\n\n      search(elNode);\n      return found;\n    },\n\n    /**\n     * Highlights text in a string\n     *\n     * @param { String } - name of the element\n     * @param { Object } - JSON object from converted HTML\n     *\n     * @returns { Object } First node in JSON object that satisfies the condition\n     *\n     * @example\n     * this.findEl(\'caption\', this.tableJson)\n     */\n    highlightMatches: function highlightMatches(text) {\n      if (this.filter.trim() !== \'\') {\n        var matchExists = text.toLowerCase().includes(this.filter.toLowerCase());\n        var re = new RegExp(this.filter, \'ig\');\n        if (!matchExists) return text;\n        return text.replace(re, function (matchedText) {\n          return "<b class=\\"filter--highlight\\">".concat(matchedText, "</b>");\n        });\n      }\n\n      return text;\n    },\n    unescapeHtml: function unescapeHtml(html) {\n      return html.replace(/´/gmi, \'\\\'\');\n    },\n    processHtml: function processHtml() {\n      var parser = new DOMParser();\n      var rawHTML = parser.parseFromString(this.unescapeHtml(this.$props.rawHtml), \'text/html\');\n      this.processedHtml = rawHTML.activeElement.children[0];\n      this.tableToJson(rawHTML.activeElement.firstChild);\n    },\n    announcement: function announcement() {\n      var announcement = "Filtered table results, found ".concat(this.filteredRows.length, " results for query \\"").concat(this.filter, "\\"");\n\n      if (this.filter.trim() !== \'\') {\n        console.log(announcement);\n        this.$announcer.set(announcement);\n      }\n    }\n  }\n});\n;// CONCATENATED MODULE: ../../../../../../core__front-end/v2/shared/js/components/table-filter/TableFilter.vue?vue&type=script&lang=js&\n /* harmony default export */ const table_filter_TableFiltervue_type_script_lang_js_ = (TableFiltervue_type_script_lang_js_); \n// EXTERNAL MODULE: ../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(8);\n;// CONCATENATED MODULE: ../../../../../../core__front-end/v2/shared/js/components/table-filter/TableFilter.vue\n\n\n\n;\n\n\n/* normalize component */\n\nvar component = (0,componentNormalizer/* default */.Z)(\n  table_filter_TableFiltervue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (false) { var api; }\ncomponent.options.__file = "core__front-end/v2/shared/js/components/table-filter/TableFilter.vue"\n/* harmony default export */ const TableFilter = (component.exports);\n\n//# sourceURL=webpack:///../../../../../../core__front-end/v2/shared/js/components/table-filter/TableFilter.vue_+_4_modules?')}}]);